<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bingo Casino Royale - Easy Play</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <h2 style="font-size: 1.1rem;">üé∞ BINGO EASY PLAY</h2>
        <div class="balance-card">
            <span style="color:var(--text-dim); font-size: 0.7rem;">CREDITS</span>
            <span class="balance-amount" id="balance">1,000</span>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Session Info -->
        <div class="session-info">
            <div>Session: <span id="sessionCount">1</span></div>
            <div class="session-timer">Status: <span id="sessionStatus">ACTIVE</span></div>
        </div>

        <!-- Quick Join Section -->
        <div class="quick-join-section">
            <div class="section-title">
                <span>üöÄ QUICK START</span>
                <span class="easy-mode">EASY MODE</span>
            </div>
            <div class="quick-join-buttons">
                <button class="quick-join-btn primary" onclick="QuickJoinManager.quickJoin()">
                    <span class="icon">‚ö°</span>
                    <span class="text">QUICK JOIN</span>
                    <span class="subtext">Auto-selects best number</span>
                </button>
                <button class="quick-join-btn secondary" onclick="QuickJoinManager.joinWithRecommended()">
                    <span class="icon">üéØ</span>
                    <span class="text">SMART JOIN</span>
                    <span class="subtext">Best chance to win</span>
                </button>
            </div>
        </div>

        <!-- Bingo Columns Guide -->
        <div class="bingo-columns-guide">
            <div class="column-header">
                <div class="column-badge b-col">B<br><small>1-40</small></div>
                <div class="column-badge i-col">I<br><small>41-80</small></div>
                <div class="column-badge n-col">N<br><small>81-120</small></div>
                <div class="column-badge g-col">G<br><small>121-160</small></div>
                <div class="column-badge o-col">O<br><small>161-200</small></div>
            </div>
        </div>

        <!-- Number Selection -->
        <div class="section-title">
            <span>Choose Center Number (Optional)</span>
            <span id="selected-label">Pick 1-200 or use Quick Join</span>
        </div>
        <div class="selector-box">
            <div class="numbers-scroll" id="numberGrid"></div>
            <div class="taken-info" id="takenInfo">üü¢ Available | üî¥ Taken | ‚≠ê Recommended</div>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats-dashboard">
            <div class="stat-box">
                <div class="stat-value" id="activePlayers">1</div>
                <div class="stat-label">Players</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="totalCards">1</div>
                <div class="stat-label">Cards</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="winnersCount">0</div>
                <div class="stat-label">Wins</div>
            </div>
        </div>

        <!-- Hot Numbers -->
        <div class="hot-numbers-container">
            <div class="section-title">
                <span>üî• Hot Numbers (Last Hour)</span>
                <button class="refresh-btn" onclick="StatsManager.updateHotNumbers()">‚ü≥</button>
            </div>
            <div class="hot-numbers" id="hotNumbers"></div>
        </div>

        <!-- Game Dashboard -->
        <div class="dashboard">
            <div id="status-text" style="font-size: 0.8rem; color: var(--text-dim);">
                READY TO PLAY
                <span id="gameStatusIndicator" class="game-status status-active">ACTIVE</span>
            </div>
            
            <!-- Bingo Announcement Display -->
            <div class="bingo-announcement">
                <div class="letter-display" id="letterDisplay">B</div>
                <div class="announcement-display">
                    <div class="current-ball" id="ballDisplay">--</div>
                    <div class="letter-info" id="letterInfo">B Column (1-40)</div>
                </div>
                <div class="call-number" id="callNumber">-</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <div style="font-size: 0.7rem; color: var(--primary);" id="progressText">
                Draw: <span id="drawCount">0</span> / 75
            </div>
            <div class="next-draw">Next session in: <span id="nextSessionTimer">60</span>s</div>
            
            <!-- Recent Calls -->
            <div class="recent-calls">
                <div class="section-title">
                    <span>Recent Calls</span>
                    <span id="callCount">0 calls</span>
                </div>
                <div class="calls-list" id="callsList"></div>
            </div>
        </div>

        <!-- Pattern Selection -->
        <div class="section-title">
            <span>Bingo Pattern</span>
            <span id="pattern-label">LINE</span>
        </div>
        <div class="pattern-selector" id="patternSelector"></div>

        <!-- Bingo Card -->
        <div class="bingo-card">
            <div class="bingo-header">
                <div class="bingo-letter b-col">B</div>
                <div class="bingo-letter i-col">I</div>
                <div class="bingo-letter n-col">N</div>
                <div class="bingo-letter g-col">G</div>
                <div class="bingo-letter o-col">O</div>
            </div>
            <div class="bingo-grid" id="cardGrid"></div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn" onclick="toggleWagerModal()">
                <span class="icon">üí∞</span>
                <span class="text">Bet: <span id="wagerBtnLabel">50</span></span>
            </button>
            <button class="action-btn" onclick="UIManager.findAvailableNumber()">
                <span class="icon">üîç</span>
                <span class="text">Find Number</span>
            </button>
            <button class="action-btn" onclick="UIManager.resetPlayerGame()">
                <span class="icon">üîÑ</span>
                <span class="text">Leave</span>
            </button>
        </div>

        <!-- Main Join Button -->
        <button class="main-join-btn" id="startBtn" onclick="UIManager.joinSession()">
            <span class="join-icon">üéÆ</span>
            <span class="join-text">JOIN GAME</span>
            <span class="join-subtext">Click or use Quick Join above</span>
        </button>

        <!-- Game History -->
        <button class="history-btn" onclick="toggleGameHistory()">
            <span class="icon">üìú</span>
            Game History
            <span class="history-badge" id="historyBadge">0</span>
        </button>
    </div>

    <!-- Modals -->
    <div class="modal" id="wagerModal">
        <div class="modal-content">
            <h3>Select Wager</h3>
            <div class="wager-ui">
                <button class="wager-btn" onclick="changeWager(-10)">-10</button>
                <button class="wager-btn" onclick="changeWager(-5)">-5</button>
                <div class="wager-display" id="modalWager">50</div>
                <button class="wager-btn" onclick="changeWager(5)">+5</button>
                <button class="wager-btn" onclick="changeWager(10)">+10</button>
            </div>
            <div style="font-size: 0.8rem; color: var(--text-dim); margin: 10px 0;">
                Min: 10 | Max: 500 | Balance: <span id="modalBalance">1000</span>
            </div>
            <button class="main-btn" onclick="toggleWagerModal()">CONFIRM</button>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal" id="winModal">
        <div class="modal-content win">
            <h2>üéâ BINGO! YOU WIN! üéâ</h2>
            <div class="win-amount" id="winAmount">+250</div>
            <div class="win-details">
                <div>Pattern: <span id="winPattern">LINE</span></div>
                <div>Draws: <span id="winDraws">25</span> / 75</div>
                <div>Wager: <span id="winWager">50</span> credits</div>
            </div>
            <button class="main-btn" onclick="closeWinModal()">PLAY AGAIN</button>
        </div>
    </div>

    <!-- Lose Modal -->
    <div class="modal" id="loseModal">
        <div class="modal-content lose">
            <h2>üòî GAME OVER</h2>
            <div class="lose-amount" id="loseAmount">-50</div>
            <div class="lose-details">
                No bingo pattern completed<br>
                75 draws reached
            </div>
            <button class="main-btn" onclick="closeLoseModal()">TRY AGAIN</button>
        </div>
    </div>

    <!-- Quick Join Modal -->
    <div class="modal" id="quickJoinModal">
        <div class="modal-content quick-join">
            <h2>‚ö° QUICK JOIN</h2>
            <div class="quick-join-details">
                <div class="detail">
                    <span>Selected Number:</span>
                    <span class="highlight" id="quickJoinNumber">47</span>
                </div>
                <div class="detail">
                    <span>Pattern:</span>
                    <span id="quickJoinPattern">LINE</span>
                </div>
                <div class="detail">
                    <span>Wager:</span>
                    <span id="quickJoinWager">50</span> credits
                </div>
                <div class="detail">
                    <span>Win Chance:</span>
                    <span class="chance" id="quickJoinChance">Good</span>
                </div>
            </div>
            <button class="main-btn confirm" onclick="QuickJoinManager.confirmQuickJoin()">JOIN NOW</button>
            <button class="secondary-btn" onclick="closeQuickJoinModal()">CANCEL</button>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal" id="historyModal">
        <div class="modal-content history">
            <h2>üìú GAME HISTORY</h2>
            <div class="tabs">
                <button class="tab active" onclick="switchTab('winners')">üèÜ Winners</button>
                <button class="tab" onclick="switchTab('stats')">üìä Stats</button>
                <button class="tab" onclick="switchTab('numbers')">üî¢ Numbers</button>
            </div>
            <div class="tab-content" id="winnersTab">
                <div id="winnersList">Loading...</div>
            </div>
            <div class="tab-content" id="statsTab" style="display:none;">
                <div id="statsContent">Loading...</div>
            </div>
            <div class="tab-content" id="numbersTab" style="display:none;">
                <div id="numbersContent">Loading...</div>
            </div>
            <button class="main-btn" onclick="closeHistoryModal()">CLOSE</button>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script>
        // Global variables
        window.GameState = {
            balance: 1000,
            wager: 50,
            selectedCenter: null,
            isPlaying: false,
            hasJoinedSession: false,
            markedCells: new Set(),
            currentPattern: 'line',
            cardNumbers: [],
            sessionWon: false,
            wagerHistory: [],
            gameHistory: []
        };

        window.GameSession = {
            drawnNumbers: [],
            drawInterval: null,
            drawCount: 0,
            maxDraws: 75,
            drawIntervalMs: 1000,
            betweenGamesIntervalMs: 60000,
            takenNumbers: new Set(),
            activePlayers: 1,
            totalCards: 1,
            sessionActive: true,
            sessionEnded: false,
            winnersCount: 0,
            waitingForNextSession: false,
            nextSessionTimer: null,
            sessionId: 1,
            currentBall: null,
            recentWinners: []
        };
    </script>
    
    <script src="game.js"></script>
    <script src="ui.js"></script>
    <script src="quickjoin.js"></script>
    <script src="announcer.js"></script>
    
    <script>
        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            UIManager.init();
            QuickJoinManager.init();
            BingoAnnouncer.init();
            
            // Start game session
            GameSession.startGameSession();
            
            // Update UI every second
            setInterval(() => {
                UIManager.updateUI();
            }, 1000);
        });
    </script>
</body>
</html>
