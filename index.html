<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ ULTRA BINGO CASINO</title>
    <style>
        /* ===== MINIMALIST CASINO THEME ===== */
        :root {
            --primary: #0f0f23;
            --secondary: #00ff00;
            --accent: #ff00ff;
            --card-bg: #1a1a2e;
            --panel-bg: #16213e;
            --text: #ffffff;
            --win: #00ff88;
            --lose: #ff4444;
            --grid-glow: rgba(0, 255, 255, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background: var(--primary);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* NEON GLOW EFFECTS */
        .neon-text {
            text-shadow: 0 0 10px var(--secondary),
                         0 0 20px var(--secondary),
                         0 0 30px var(--secondary);
            animation: neon-pulse 2s infinite alternate;
        }
        
        .neon-border {
            box-shadow: 0 0 10px var(--accent),
                        inset 0 0 10px var(--accent);
            border: 2px solid var(--accent);
        }
        
        @keyframes neon-pulse {
            0% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        /* ===== MAIN LAYOUT ===== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-areas:
                "header header"
                "numbers game"
                "control control"
                "history winners";
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 1100px) {
            .container {
                grid-template-areas:
                    "header"
                    "numbers"
                    "game"
                    "control"
                    "history"
                    "winners";
                grid-template-columns: 1fr;
            }
        }
        
        /* ===== HEADER ===== */
        .header {
            grid-area: header;
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid var(--secondary);
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        /* ===== PLAYER INFO BAR ===== */
        .player-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid var(--secondary);
        }
        
        .points-display {
            font-size: 1.8rem;
            color: var(--secondary);
            font-weight: bold;
        }
        
        /* ===== CONTROL BUTTONS ===== */
        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid var(--accent);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--accent);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            color: black;
        }
        
        .btn-success {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: black;
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #ff4444, #cc0000);
            color: white;
        }
        
        /* ===== NUMBER SELECTION GRID ===== */
        .numbers-grid-container {
            grid-area: numbers;
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--grid-glow);
        }
        
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .num-btn {
            aspect-ratio: 1;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .num-btn:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .num-btn.selected {
            background: var(--accent);
            color: black;
            font-weight: bold;
            animation: pulse 0.5s infinite alternate;
        }
        
        .num-btn.surrounding {
            background: rgba(0, 255, 0, 0.2);
            border-color: var(--secondary);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }
        
        /* ===== BINGO CARD ===== */
        .bingo-container {
            grid-area: game;
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--grid-glow);
        }
        
        .bingo-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
        }
        
        .bingo-header {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .bingo-letter {
            text-align: center;
            padding: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            background: rgba(255, 0, 255, 0.3);
            border-radius: 5px;
            color: var(--accent);
        }
        
        .bingo-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 5px;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .bingo-cell.marked {
            background: rgba(0, 255, 0, 0.3);
            border-color: var(--secondary);
            animation: marked-pulse 0.5s;
        }
        
        @keyframes marked-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* ===== CURRENT NUMBER DISPLAY ===== */
        .current-number {
            text-align: center;
            padding: 30px;
            background: linear-gradient(45deg, rgba(255,0,255,0.2), rgba(0,255,255,0.2));
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid var(--accent);
        }
        
        .current-number .number {
            font-size: 4rem;
            color: var(--secondary);
            margin: 10px 0;
            text-shadow: 0 0 20px var(--secondary);
        }
        
        .current-number .letter {
            font-size: 2rem;
            color: var(--accent);
        }
        
        /* ===== WAGER CONTROL ===== */
        .wager-control {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }
        
        .wager-control.active {
            display: block;
            animation: slideDown 0.5s;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .wager-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .wager-amount {
            font-size: 2.5rem;
            color: var(--secondary);
            min-width: 150px;
            text-align: center;
        }
        
        .wager-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: var(--accent);
            color: black;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .wager-btn:hover {
            transform: scale(1.1);
        }
        
        /* ===== CALLED NUMBERS ===== */
        .called-numbers {
            grid-area: history;
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .numbers-history {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .called-num {
            width: 40px;
            height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 255, 255, 0.2);
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        /* ===== WINNERS PANEL ===== */
        .winners-panel {
            grid-area: winners;
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            display: none;
        }
        
        .winners-panel.active {
            display: block;
        }
        
        /* ===== MODALS ===== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }
        
        .modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .modal-content {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            border: 3px solid var(--secondary);
            box-shadow: 0 0 50px var(--secondary);
        }
        
        /* ===== AUDIO CONTROL ===== */
        .audio-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .audio-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid var(--accent);
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .numbers-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .bingo-cell {
                font-size: 1rem;
            }
            
            .current-number .number {
                font-size: 3rem;
            }
        }
        
        /* ===== GLITCH EFFECT ===== */
        .glitch {
            position: relative;
            animation: glitch 5s infinite;
        }
        
        @keyframes glitch {
            0% { text-shadow: 0.05em 0 0 #ff00ff, -0.05em -0.025em 0 #00ffff; }
            14% { text-shadow: 0.05em 0 0 #ff00ff, -0.05em -0.025em 0 #00ffff; }
            15% { text-shadow: -0.05em -0.025em 0 #ff00ff, 0.025em 0.025em 0 #00ffff; }
            49% { text-shadow: -0.05em -0.025em 0 #ff00ff, 0.025em 0.025em 0 #00ffff; }
            50% { text-shadow: 0.025em 0.05em 0 #ff00ff, 0.05em 0 0 #00ffff; }
            99% { text-shadow: 0.025em 0.05em 0 #ff00ff, 0.05em 0 0 #00ffff; }
            100% { text-shadow: -0.025em 0 0 #ff00ff, -0.025em -0.025em 0 #00ffff; }
        }
    </style>
</head>
<body>
    <!-- AUDIO CONTROL -->
    <div class="audio-controls">
        <button class="audio-btn" id="muteBtn">üîä</button>
    </div>
    
    <!-- MAIN CONTAINER -->
    <div class="container">
        <!-- HEADER -->
        <div class="header glitch">
            <div class="logo">üé∞ ULTRA BINGO CASINO</div>
            <div class="player-bar">
                <div class="points-display" id="points">1,000 POINTS</div>
                <div class="control-buttons">
                    <button class="btn" id="pointsBtn">üí∞ Points</button>
                    <button class="btn" id="historyBtn">üìú History</button>
                    <button class="btn" id="helpBtn">‚ùì Help</button>
                </div>
            </div>
        </div>
        
        <!-- NUMBER SELECTION -->
        <div class="numbers-grid-container">
            <h3>üéØ SELECT YOUR NUMBER (1-200)</h3>
            <div class="numbers-grid" id="numbersGrid"></div>
            
            <!-- WAGER CONTROL -->
            <div class="wager-control" id="wagerControl">
                <h4>üí∞ PLACE YOUR BET</h4>
                <div class="wager-display">
                    <button class="wager-btn" id="decreaseBtn">‚àí</button>
                    <div class="wager-amount" id="wagerAmount">50</div>
                    <button class="wager-btn" id="increaseBtn">+</button>
                </div>
                <div class="control-buttons">
                    <button class="btn btn-primary" id="placeBetBtn">üéÆ START GAME</button>
                    <button class="btn btn-danger" id="cancelBetBtn">‚úñ Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- BINGO GAME -->
        <div class="bingo-container">
            <h3>üé¥ YOUR BINGO CARD</h3>
            
            <!-- BINGO GRID -->
            <div class="bingo-grid">
                <div class="bingo-header">
                    <div class="bingo-letter">B</div>
                    <div class="bingo-letter">I</div>
                    <div class="bingo-letter">N</div>
                    <div class="bingo-letter">G</div>
                    <div class="bingo-letter">O</div>
                </div>
                <div id="bingoCells"></div>
            </div>
            
            <!-- CURRENT NUMBER -->
            <div class="current-number">
                <div>üéØ CURRENT NUMBER</div>
                <div class="number" id="currentNumber">---</div>
                <div class="letter" id="currentLetter"></div>
                <div id="progress">0/75 numbers called</div>
            </div>
            
            <!-- GAME CONTROLS -->
            <div class="control-buttons">
                <button class="btn btn-primary" id="startBtn" disabled>‚ñ∂Ô∏è Start Auto-Call</button>
                <button class="btn btn-danger" id="stopBtn" disabled>‚èπÔ∏è Stop</button>
                <button class="btn btn-success" id="checkBtn" disabled>‚úÖ Check Bingo</button>
            </div>
        </div>
        
        <!-- CALLED NUMBERS -->
        <div class="called-numbers">
            <h3>üì£ CALLED NUMBERS</h3>
            <div class="numbers-history" id="calledNumbers"></div>
        </div>
        
        <!-- WINNERS -->
        <div class="winners-panel" id="winnersPanel">
            <h3>üèÜ CURRENT WINNERS</h3>
            <div id="winnersList"></div>
        </div>
    </div>
    
    <!-- POINTS MODAL -->
    <div class="modal" id="pointsModal">
        <div class="modal-content">
            <h3 class="neon-text">üí∞ POINTS MANAGEMENT</h3>
            <div class="points-display" style="font-size: 3rem; margin: 20px 0;">1,000</div>
            <div class="control-buttons">
                <button class="btn btn-success">üí≥ Deposit</button>
                <button class="btn btn-primary">üèß Withdraw</button>
                <button class="btn" id="closePointsBtn">Close</button>
            </div>
        </div>
    </div>
    
    <!-- WIN/LOSE MODAL -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h3 id="resultTitle" class="neon-text">üéâ BINGO!</h3>
            <div id="resultMessage" style="margin: 20px 0; font-size: 1.2rem;"></div>
            <div id="resultPoints" style="font-size: 2rem; color: var(--secondary); margin: 20px 0;"></div>
            <button class="btn btn-primary" id="playAgainBtn">üéÆ Play Again</button>
        </div>
    </div>
    
    <!-- AUDIO ELEMENTS -->
    <audio id="bgMusic" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        // ===== GAME CONFIGURATION =====
        const CONFIG = {
            TOTAL_NUMBERS: 200,
            CARD_SIZE: 25,
            NUMBERS_TO_CALL: 75,
            CALL_INTERVAL: 1000,
            STARTING_POINTS: 1000,
            MIN_WAGER: 50,
            WAGER_STEPS: { 50: 25, 250: 50, 500: 100 },
            ODDS: { single: 5, two: 10, three: 50, four: 200, full: 1000 }
        };

        // ===== GAME STATE =====
        let state = {
            points: CONFIG.STARTING_POINTS,
            selectedNumber: null,
            wager: 50,
            gameActive: false,
            calledNumbers: [],
            markedCells: new Set(),
            bingoCard: [],
            interval: null,
            lastWager: 50,
            mute: false,
            voiceEnabled: true
        };

        // ===== INITIALIZATION =====
        function init() {
            createNumberGrid();
            updatePointsDisplay();
            setupEventListeners();
            playBackgroundMusic();
            selectNumber(100); // Default selection
        }

        // ===== CREATE NUMBER GRID =====
        function createNumberGrid() {
            const grid = document.getElementById('numbersGrid');
            for (let i = 1; i <= CONFIG.TOTAL_NUMBERS; i++) {
                const btn = document.createElement('button');
                btn.className = 'num-btn';
                btn.textContent = i;
                btn.onclick = () => selectNumber(i);
                grid.appendChild(btn);
            }
        }

        // ===== SELECT NUMBER =====
        function selectNumber(num) {
            // Reset previous selection
            document.querySelectorAll('.num-btn.selected, .num-btn.surrounding')
                .forEach(btn => btn.classList.remove('selected', 'surrounding'));
            
            state.selectedNumber = num;
            
            // Highlight selected and surrounding numbers
            const selectedBtn = document.querySelector(`.num-btn:nth-child(${num})`);
            selectedBtn.classList.add('selected');
            
            const surrounding = getSurroundingNumbers(num);
            surrounding.forEach(n => {
                const btn = document.querySelector(`.num-btn:nth-child(${n})`);
                if (btn) btn.classList.add('surrounding');
            });
            
            // Generate and display bingo card
            generateBingoCard(surrounding);
            
            // Show wager control
            document.getElementById('wagerControl').classList.add('active');
            document.getElementById('wagerAmount').textContent = state.lastWager;
            state.wager = state.lastWager;
            
            // Enable start button
            document.getElementById('startBtn').disabled = false;
        }

        // ===== GET SURROUNDING NUMBERS =====
        function getSurroundingNumbers(center) {
            const nums = new Set([center]);
            let offset = 1;
            
            while (nums.size < CONFIG.CARD_SIZE) {
                for (let i = -offset; i <= offset; i++) {
                    const num = center + i;
                    if (num >= 1 && num <= CONFIG.TOTAL_NUMBERS) {
                        nums.add(num);
                        if (nums.size === CONFIG.CARD_SIZE) break;
                    }
                }
                offset++;
            }
            
            return Array.from(nums);
        }

        // ===== GENERATE BINGO CARD =====
        function generateBingoCard(numbers) {
            const sorted = [...numbers].sort((a, b) => a - b);
            state.bingoCard = [];
            const container = document.getElementById('bingoCells');
            container.innerHTML = '';
            
            // Create 5x5 grid
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    const idx = row * 5 + col;
                    const cell = document.createElement('div');
                    cell.className = 'bingo-cell';
                    
                    if (idx < sorted.length) {
                        const num = sorted[idx];
                        cell.textContent = num;
                        cell.dataset.number = num;
                        cell.dataset.id = `${row}-${col}`;
                        
                        // Color by letter range
                        const letter = getLetter(num);
                        cell.style.borderColor = getLetterColor(letter);
                    } else {
                        cell.textContent = 'FREE';
                        cell.classList.add('marked');
                    }
                    
                    container.appendChild(cell);
                }
            }
            
            state.markedCells.clear();
        }

        // ===== START GAME =====
        function startGame() {
            if (state.wager > state.points) {
                showMessage('Insufficient points!', 'error');
                return;
            }
            
            state.points -= state.wager;
            state.gameActive = true;
            state.calledNumbers = [];
            state.markedCells.clear();
            
            // Reset UI
            document.getElementById('calledNumbers').innerHTML = '';
            document.getElementById('currentNumber').textContent = '---';
            document.getElementById('progress').textContent = '0/75 numbers called';
            
            // Disable controls
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('checkBtn').disabled = false;
            
            // Start calling numbers
            callNextNumber();
            state.interval = setInterval(callNextNumber, CONFIG.CALL_INTERVAL);
            
            updatePointsDisplay();
            showMessage(`Game started! Bet: ${state.wager} points`);
        }

        // ===== CALL NEXT NUMBER =====
        function callNextNumber() {
            if (!state.gameActive || state.calledNumbers.length >= CONFIG.NUMBERS_TO_CALL) {
                endGame();
                return;
            }
            
            // Generate random number (1-200)
            let num;
            do {
                num = Math.floor(Math.random() * CONFIG.TOTAL_NUMBERS) + 1;
            } while (state.calledNumbers.includes(num));
            
            state.calledNumbers.push(num);
            
            // Update display
            const letter = getLetter(num);
            document.getElementById('currentNumber').textContent = num;
            document.getElementById('currentLetter').textContent = letter;
            document.getElementById('progress').textContent = 
                `${state.calledNumbers.length}/${CONFIG.NUMBERS_TO_CALL} numbers called`;
            
            // Add to history
            addCalledNumber(num, letter);
            
            // Mark on card
            markNumber(num);
            
            // Speak number
            if (state.voiceEnabled && !state.mute) {
                speakNumber(num, letter);
            }
            
            // Check for winners
            if (state.calledNumbers.length % 10 === 0) {
                checkWinners();
            }
        }

        // ===== MARK NUMBER ON CARD =====
        function markNumber(num) {
            const cell = document.querySelector(`.bingo-cell[data-number="${num}"]`);
            if (cell && !cell.classList.contains('marked')) {
                cell.classList.add('marked');
                state.markedCells.add(cell.dataset.id);
                checkBingo();
            }
        }

        // ===== CHECK BINGO =====
        function checkBingo() {
            // Check rows
            for (let row = 0; row < 5; row++) {
                const cells = [];
                for (let col = 0; col < 5; col++) {
                    cells.push(`${row}-${col}`);
                }
                if (cells.every(cell => state.markedCells.has(cell) || cell === '2-2')) {
                    winGame('Row ' + (row + 1));
                    return;
                }
            }
            
            // Check columns
            for (let col = 0; col < 5; col++) {
                const cells = [];
                for (let row = 0; row < 5; row++) {
                    cells.push(`${row}-${col}`);
                }
                if (cells.every(cell => state.markedCells.has(cell) || cell === '2-2')) {
                    winGame('Column ' + ['B','I','N','G','O'][col]);
                    return;
                }
            }
            
            // Check diagonals
            const diag1 = ['0-0', '1-1', '2-2', '3-3', '4-4'];
            const diag2 = ['0-4', '1-3', '2-2', '3-1', '4-0'];
            
            if (diag1.every(cell => state.markedCells.has(cell) || cell === '2-2')) {
                winGame('Diagonal');
                return;
            }
            if (diag2.every(cell => state.markedCells.has(cell) || cell === '2-2')) {
                winGame('Diagonal');
                return;
            }
        }

        // ===== WIN GAME =====
        function winGame(pattern) {
            state.gameActive = false;
            clearInterval(state.interval);
            
            // Calculate winnings
            const lines = pattern.includes('Row') ? 1 : 
                         pattern.includes('Column') ? 1 : 
                         pattern.includes('Diagonal') ? 1 : 0;
            
            const multiplier = lines === 1 ? CONFIG.ODDS.single : 
                             lines === 2 ? CONFIG.ODDS.two : 1;
            
            const winnings = state.wager * multiplier;
            state.points += winnings;
            
            // Show result
            document.getElementById('resultTitle').textContent = 'üéâ BINGO!';
            document.getElementById('resultMessage').textContent = 
                `You won with ${pattern}! Multiplier: ${multiplier}x`;
            document.getElementById('resultPoints').textContent = 
                `+${winnings} POINTS`;
            document.getElementById('resultModal').classList.add('active');
            
            updatePointsDisplay();
            state.lastWager = state.wager; // Remember last wager
        }

        // ===== END GAME =====
        function endGame() {
            state.gameActive = false;
            clearInterval(state.interval);
            
            // Check if player lost
            if (state.calledNumbers.length >= CONFIG.NUMBERS_TO_CALL) {
                document.getElementById('resultTitle').textContent = 'üòû GAME OVER';
                document.getElementById('resultMessage').textContent = 
                    'All 75 numbers called. No Bingo this time!';
                document.getElementById('resultPoints').textContent = 
                    `-${state.wager} POINTS`;
                document.getElementById('resultModal').classList.add('active');
                state.lastWager = state.wager; // Remember last wager
            }
            
            // Reset controls
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('checkBtn').disabled = true;
        }

        // ===== ADJUST WAGER =====
        function adjustWager(delta) {
            let step = 25;
            if (state.wager >= 250 && state.wager < 500) step = 50;
            if (state.wager >= 500) step = 100;
            
            const newWager = state.wager + (delta * step);
            
            if (newWager >= CONFIG.MIN_WAGER && newWager <= state.points) {
                state.wager = newWager;
                document.getElementById('wagerAmount').textContent = state.wager;
            }
        }

        // ===== SPEECH SYNTHESIS =====
        function speakNumber(num, letter) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(`${num} ${letter}`);
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // ===== AUDIO CONTROL =====
        function playBackgroundMusic() {
            const audio = document.getElementById('bgMusic');
            audio.volume = 0.3;
            audio.play().catch(() => {
                console.log('Auto-play prevented. User interaction required.');
            });
        }

        function toggleMute() {
            state.mute = !state.mute;
            const audio = document.getElementById('bgMusic');
            audio.muted = state.mute;
            document.getElementById('muteBtn').textContent = state.mute ? 'üîá' : 'üîä';
        }

        // ===== HELPER FUNCTIONS =====
        function getLetter(num) {
            if (num <= 40) return 'B';
            if (num <= 80) return 'I';
            if (num <= 120) return 'N';
            if (num <= 160) return 'G';
            return 'O';
        }

        function getLetterColor(letter) {
            const colors = {
                'B': '#ff0000',
                'I': '#00ff00',
                'N': '#0000ff',
                'G': '#ffff00',
                'O': '#ff00ff'
            };
            return colors[letter] || '#ffffff';
        }

        function addCalledNumber(num, letter) {
            const container = document.getElementById('calledNumbers');
            const div = document.createElement('div');
            div.className = 'called-num';
            div.innerHTML = `<strong>${num}</strong><small>${letter}</small>`;
            div.style.background = getLetterColor(letter);
            container.insertBefore(div, container.firstChild);
            
            // Limit to 30 displayed
            if (container.children.length > 30) {
                container.removeChild(container.lastChild);
            }
        }

        function updatePointsDisplay() {
            document.getElementById('points').textContent = `${state.points} POINTS`;
        }

        function showMessage(text, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${text}`);
        }

        function checkWinners() {
            // Simulate checking other winners
            const winnersList = document.getElementById('winnersList');
            winnersList.innerHTML = '<div>Checking other potential winners...</div>';
            document.getElementById('winnersPanel').classList.add('active');
        }

        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            // Wager buttons
            document.getElementById('increaseBtn').onclick = () => adjustWager(1);
            document.getElementById('decreaseBtn').onclick = () => adjustWager(-1);
            
            // Game buttons
            document.getElementById('startBtn').onclick = startGame;
            document.getElementById('stopBtn').onclick = () => { state.gameActive = false; clearInterval(state.interval); };
            document.getElementById('checkBtn').onclick = checkBingo;
            document.getElementById('placeBetBtn').onclick = startGame;
            document.getElementById('cancelBetBtn').onclick = () => {
                document.getElementById('wagerControl').classList.remove('active');
            };
            
            // Modal buttons
            document.getElementById('pointsBtn').onclick = () => {
                document.getElementById('pointsModal').classList.add('active');
            };
            
            document.getElementById('closePointsBtn').onclick = () => {
                document.getElementById('pointsModal').classList.remove('active');
            };
            
            document.getElementById('playAgainBtn').onclick = () => {
                document.getElementById('resultModal').classList.remove('active');
                // Prompt for new number selection
                showMessage('Please select a new number to play again!');
            };
            
            // Audio control
            document.getElementById('muteBtn').onclick = toggleMute;
            
            // Other buttons
            document.getElementById('historyBtn').onclick = () => {
                showMessage('Game history (last 10 games):\nWin: +500\nLoss: -50\nWin: +1000');
            };
            
            document.getElementById('helpBtn').onclick = () => {
                alert('üéÆ HOW TO PLAY:\n1. Select a number (1-200)\n2. Place your bet (50+ points)\n3. Numbers auto-call every second\n4. Match numbers on your card\n5. Get BINGO to win!');
            };
        }

        // ===== INITIALIZE ON LOAD =====
        window.onload = init;
    </script>
</body>
    </html>
