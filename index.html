<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bingo Casino - Fair Play</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <h2 style="font-size: 1.1rem;">üé∞ BINGO FAIR PLAY</h2>
        <div class="balance-card">
            <span style="color:var(--text-dim); font-size: 0.7rem;">CREDITS</span>
            <span class="balance-amount" id="balance">1,000</span>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Session Status -->
        <div class="phase-indicator">
            <div class="phase-badge" id="phaseBadge">üî¥ DRAWING</div>
            <div class="phase-timer">Next pick phase: <span id="phaseTimer">60</span>s</div>
        </div>

        <!-- Game Phase Message -->
        <div class="phase-message" id="phaseMessage">
            <div class="phase-icon">‚è≥</div>
            <div class="phase-text">Numbers being drawn. Join next session in <span id="joinTimer">60</span>s</div>
        </div>

        <!-- Bingo Columns Guide -->
        <div class="bingo-columns-guide">
            <div class="section-title">
                <span>BINGO COLUMNS</span>
                <span>Pick during JOIN PHASE only</span>
            </div>
            <div class="column-header">
                <div class="column-badge b-col">B<br><small>1-40</small></div>
                <div class="column-badge i-col">I<br><small>41-80</small></div>
                <div class="column-badge n-col">N<br><small>81-120</small></div>
                <div class="column-badge g-col">G<br><small>121-160</small></div>
                <div class="column-badge o-col">O<br><small>161-200</small></div>
            </div>
        </div>

        <!-- Number Selection (Disabled during draw phase) -->
        <div class="section-title">
            <span id="numberSelectTitle">üîí Number Selection LOCKED</span>
            <span id="numberSelectSubtitle">Wait for join phase</span>
        </div>
        <div class="selector-box">
            <div class="numbers-scroll" id="numberGrid"></div>
            <div class="phase-info" id="phaseInfo">
                <span class="info-icon">‚ÑπÔ∏è</span>
                <span>Numbers can only be picked BETWEEN sessions</span>
            </div>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats-dashboard">
            <div class="stat-box">
                <div class="stat-value" id="activePlayers">0</div>
                <div class="stat-label">Players</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="totalCards">0</div>
                <div class="stat-label">Cards</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="winnersCount">0</div>
                <div class="stat-label">Wins</div>
            </div>
        </div>

        <!-- Current Announcement Display -->
        <div class="announcement-container">
            <div class="section-title">
                <span>üéØ CURRENT CALL</span>
                <span id="callCounter">#0</span>
            </div>
            <div class="current-call-display">
                <div class="call-letter" id="callLetter">B</div>
                <div class="call-number" id="callNumber">-</div>
                <div class="call-full" id="callFull">B-</div>
            </div>
            <div class="call-history" id="callHistory">
                <!-- Recent calls will appear here -->
            </div>
        </div>

        <!-- Game Dashboard -->
        <div class="dashboard">
            <div id="status-text" style="font-size: 0.8rem; color: var(--text-dim);">
                DRAWING IN PROGRESS
            </div>
            
            <div class="progress-section">
                <div class="progress-header">
                    <span>Session Progress</span>
                    <span id="progressText">0 / 75</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
            </div>

            <!-- Next Session Countdown -->
            <div class="next-session">
                <div class="next-session-title">Next Join Phase In</div>
                <div class="next-session-timer" id="nextSessionTimer">01:00</div>
                <div class="next-session-info">
                    <span class="info-icon">‚è∞</span>
                    <span>Prepare your number during this time</span>
                </div>
            </div>
        </div>

        <!-- Pattern Selection -->
        <div class="section-title">
            <span>Bingo Pattern</span>
            <span id="pattern-label">LINE</span>
        </div>
        <div class="pattern-selector" id="patternSelector"></div>

        <!-- Your Bingo Card -->
        <div class="your-card-section">
            <div class="section-title">
                <span>üé¥ YOUR BINGO CARD</span>
                <span id="cardStatus">Not Joined</span>
            </div>
            <div class="bingo-card">
                <div class="bingo-header">
                    <div class="bingo-letter b-col">B</div>
                    <div class="bingo-letter i-col">I</div>
                    <div class="bingo-letter n-col">N</div>
                    <div class="bingo-letter g-col">G</div>
                    <div class="bingo-letter o-col">O</div>
                </div>
                <div class="bingo-grid" id="cardGrid"></div>
            </div>
        </div>

        <!-- Action Buttons (Context-aware) -->
        <div class="action-buttons">
            <button class="action-btn" id="wagerBtn" onclick="toggleWagerModal()">
                <span class="icon">üí∞</span>
                <span class="text">Bet: <span id="wagerBtnLabel">50</span></span>
            </button>
            
            <button class="action-btn" id="readyBtn" onclick="prepareForNextSession()">
                <span class="icon">‚úÖ</span>
                <span class="text">Get Ready</span>
            </button>
            
            <button class="action-btn" id="joinBtn" onclick="joinNextSession()" disabled>
                <span class="icon">üéÆ</span>
                <span class="text">JOIN NEXT</span>
            </button>
        </div>

        <!-- Join Confirmation -->
        <div class="join-confirm" id="joinConfirm" style="display: none;">
            <div class="confirm-details">
                <div class="detail-item">
                    <span>Your Number:</span>
                    <span class="highlight" id="confirmNumber">-</span>
                </div>
                <div class="detail-item">
                    <span>Pattern:</span>
                    <span id="confirmPattern">LINE</span>
                </div>
                <div class="detail-item">
                    <span>Wager:</span>
                    <span id="confirmWager">50</span> credits
                </div>
            </div>
            <button class="confirm-btn" onclick="confirmJoin()">CONFIRM JOIN</button>
            <button class="cancel-btn" onclick="cancelJoin()">CANCEL</button>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="stat-mini">
                <div class="mini-value" id="sessionNumber">1</div>
                <div class="mini-label">Session</div>
            </div>
            <div class="stat-mini">
                <div class="mini-value" id="drawsCount">0</div>
                <div class="mini-label">Draws</div>
            </div>
            <div class="stat-mini">
                <div class="mini-value" id="winsMini">0</div>
                <div class="mini-label">Wins</div>
            </div>
            <button class="history-btn" onclick="showGameHistory()">
                <span class="icon">üìä</span>
                Stats
            </button>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="wagerModal">
        <div class="modal-content">
            <h3>üí∞ Select Wager</h3>
            <div class="wager-ui">
                <button class="wager-btn" onclick="changeWager(-25)">-25</button>
                <button class="wager-btn" onclick="changeWager(-10)">-10</button>
                <div class="wager-display" id="modalWager">50</div>
                <button class="wager-btn" onclick="changeWager(10)">+10</button>
                <button class="wager-btn" onclick="changeWager(25)">+25</button>
            </div>
            <div class="wager-limits">
                Min: 10 | Max: 500 | Balance: <span id="modalBalance">1000</span>
            </div>
            <button class="modal-btn confirm" onclick="toggleWagerModal()">SET WAGER</button>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal" id="winModal">
        <div class="modal-content win-modal">
            <div class="win-icon">üéâ</div>
            <h2>BINGO! YOU WIN!</h2>
            <div class="win-amount" id="winAmount">+250</div>
            <div class="win-details">
                <div><span>Pattern:</span> <span id="winPattern">LINE</span></div>
                <div><span>Calls:</span> <span id="winCalls">25</span> / 75</div>
                <div><span>Wager:</span> <span id="winWager">50</span> credits</div>
            </div>
            <button class="modal-btn" onclick="closeWinModal()">CONTINUE</button>
        </div>
    </div>

    <!-- Lose Modal -->
    <div class="modal" id="loseModal">
        <div class="modal-content lose-modal">
            <div class="lose-icon">üòî</div>
            <h2>SESSION ENDED</h2>
            <div class="lose-amount" id="loseAmount">-50</div>
            <div class="lose-details">
                No bingo pattern completed.<br>
                75 calls reached.
            </div>
            <button class="modal-btn" onclick="closeLoseModal()">TRY NEXT SESSION</button>
        </div>
    </div>

    <!-- Join Phase Started Modal -->
    <div class="modal" id="joinPhaseModal">
        <div class="modal-content join-modal">
            <div class="join-icon">üéØ</div>
            <h2>JOIN PHASE STARTED!</h2>
            <div class="join-timer">60 seconds to join</div>
            <div class="join-instructions">
                <p>Pick your center number now!</p>
                <p>Numbers will be locked when draws start.</p>
            </div>
            <button class="modal-btn" onclick="closeJoinPhaseModal()">START PICKING</button>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal" id="historyModal">
        <div class="modal-content history-modal">
            <h2>üìä GAME STATISTICS</h2>
            <div class="history-content">
                <div class="history-section">
                    <h3>Recent Calls</h3>
                    <div class="calls-list" id="historyCalls"></div>
                </div>
                <div class="history-section">
                    <h3>Session Winners</h3>
                    <div class="winners-list" id="historyWinners"></div>
                </div>
            </div>
            <button class="modal-btn" onclick="closeHistoryModal()">CLOSE</button>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="game.js"></script>
    <script src="ui.js"></script>
    <script>
        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize UI
            UIManager.init();
            
            // Start the first session cycle
            GameManager.start();
        });
    </script>
</body>
</html>
